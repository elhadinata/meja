{"ast":null,"code":"var _jsxFileName = \"/Users/elhadinata/Desktop/20t1/COMP3900/submit/capstone-project-artemis/client/src/components/payment/Payment.jsx\";\nimport { Button, Container, OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { OrderHelper } from 'src/components/order/OrderHelper';\nimport React from 'react';\nimport { Requests } from 'src/utilities/Requests';\nexport class Payment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUserDetails = async () => {\n      const session = await Requests.getSession(localStorage.getItem('sessionId'));\n      const user = await Requests.getUser(session.user_id);\n      this.setState({\n        user: user\n      });\n    };\n\n    this.handleMinusTip = () => {\n      let oldTip = this.state.tip;\n      this.setState({\n        tip: Math.max(0, oldTip -= 1)\n      });\n    };\n\n    this.handlePlusTip = () => {\n      let oldTip = this.state.tip;\n      this.setState({\n        tip: oldTip += 1\n      });\n    };\n\n    this.handleMinusSplit = () => {\n      let oldCounter = this.state.splitCounter;\n      this.setState({\n        splitCounter: Math.max(1, --oldCounter)\n      });\n    };\n\n    this.handlePlusSplit = () => {\n      let oldCounter = this.state.splitCounter;\n      this.setState({\n        splitCounter: ++oldCounter\n      });\n    };\n\n    this.completePayment = async () => {\n      Requests.sendReceipt(localStorage.getItem('sessionId')).then(() => {\n        this.setState({\n          paymentCompleted: true\n        });\n      }).then(() => {\n        setTimeout(() => {\n          Requests.logout(localStorage.getItem('sessionId'));\n        }, 10000);\n      });\n    };\n\n    this.state = {\n      splitCounter: 1,\n      tip: 0,\n      total: OrderHelper.getGrandTotal(this.props.orderList),\n      paymentCompleted: false,\n      user: {}\n    };\n  }\n\n  componentDidMount() {\n    this.getUserDetails();\n  }\n\n  render() {\n    const {\n      total,\n      splitCounter,\n      tip,\n      user,\n      paymentCompleted\n    } = this.state;\n    return !paymentCompleted ? React.createElement(Container, {\n      className: \"payment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Payment\"), React.createElement(\"div\", {\n      className: \"payment-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"payment-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Add a tip\"), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-evenly',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handleMinusTip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"-\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"$\", tip), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handlePlusTip,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"+\"))), React.createElement(\"div\", {\n      className: \"payment-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"payment-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Total\"), React.createElement(\"h4\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"$\", (total + tip).toFixed(2))), React.createElement(\"div\", {\n      className: \"payment-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: React.createElement(Tooltip, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"This tool is provided purely for your payment calculation convenience. The full sum will still have to be paid by one person. We are currently working on bringing this feature to you in the future!\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"payment-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Split Bill Calculator\")), React.createElement(\"h4\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"$\", ((total + tip) / splitCounter).toFixed(2), \" \", React.createElement(\"span\", {\n      style: {\n        fontSize: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"per person\")), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-evenly',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handleMinusSplit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"-\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, splitCounter), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handlePlusSplit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"+\"))), React.createElement(Button, {\n      className: \"payment-complete-btn\",\n      onClick: this.completePayment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Complete Payment\")) : user && React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Thank you for your payment, \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, user.name), \"!\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"An email with your receipt has been sent to \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, user.email), \". We hope to see you again soon!\"));\n  }\n\n}","map":{"version":3,"sources":["/Users/elhadinata/Desktop/20t1/COMP3900/submit/capstone-project-artemis/client/src/components/payment/Payment.jsx"],"names":["Button","Container","OverlayTrigger","Tooltip","OrderHelper","React","Requests","Payment","Component","constructor","props","getUserDetails","session","getSession","localStorage","getItem","user","getUser","user_id","setState","handleMinusTip","oldTip","state","tip","Math","max","handlePlusTip","handleMinusSplit","oldCounter","splitCounter","handlePlusSplit","completePayment","sendReceipt","then","paymentCompleted","setTimeout","logout","total","getGrandTotal","orderList","componentDidMount","render","display","justifyContent","alignItems","toFixed","fontSize","name","email"],"mappings":"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","sourcesContent":["import { Button, Container, OverlayTrigger, Tooltip } from 'react-bootstrap';\n\nimport { OrderHelper } from 'src/components/order/OrderHelper';\nimport React from 'react';\nimport { Requests } from 'src/utilities/Requests';\n\nexport class Payment extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            splitCounter: 1,\n            tip: 0,\n            total: OrderHelper.getGrandTotal(this.props.orderList),\n            paymentCompleted: false,\n            user: {}\n        }\n    }\n\n    componentDidMount() {\n        this.getUserDetails();\n    }\n\n    getUserDetails = async () => {\n        const session = await Requests.getSession(localStorage.getItem('sessionId'));\n        const user = await Requests.getUser(session.user_id);\n        this.setState({ user: user });\n    }\n\n    handleMinusTip = () => {\n        let oldTip = this.state.tip;\n        this.setState({ tip: Math.max(0, oldTip -= 1) });\n    }\n\n    handlePlusTip = () => {\n        let oldTip = this.state.tip;\n        this.setState({ tip: oldTip += 1 });\n    }\n\n    handleMinusSplit = () => {\n        let oldCounter = this.state.splitCounter;\n        this.setState({ splitCounter: Math.max(1,  --oldCounter) });\n    }\n\n    handlePlusSplit = () => {\n        let oldCounter = this.state.splitCounter;\n        this.setState({ splitCounter: ++oldCounter });\n    }\n\n    completePayment = async () => {\n        Requests\n            .sendReceipt(localStorage.getItem('sessionId'))\n            .then(() => {\n                this.setState({ paymentCompleted: true });\n            })\n            .then(() => {\n                setTimeout(() => {\n                    Requests.logout(localStorage.getItem('sessionId'))\n                }, 10000);\n            });\n    }\n\n    render() {\n        const { total, splitCounter, tip, user, paymentCompleted } = this.state;\n\n        return !paymentCompleted ?\n            (<Container className=\"payment\">\n                <h1>Payment</h1>\n                <div className=\"payment-div\">\n                    <h5 className=\"payment-label\">Add a tip</h5>\n\n                    <div style={{display: 'flex', justifyContent: 'space-evenly', alignItems: 'center'}}>\n                        <Button variant='primary' onClick={this.handleMinusTip}>-</Button>\n                        <h5>${tip}</h5>\n                        <Button variant='primary' onClick={this.handlePlusTip}>+</Button>\n                    </div>\n                </div>\n\n                <div className=\"payment-div\">\n                    <h4 className=\"payment-label\">Total</h4>\n                    <h4 align=\"center\">${(total + tip).toFixed(2)}</h4>\n                </div>\n\n                <div className=\"payment-div\">\n                    <OverlayTrigger \n                        placement='right' \n                        overlay={\n                            <Tooltip>\n                                This tool is provided purely for your payment calculation \n                                convenience. The full sum will still have to be paid by \n                                one person. We are currently working on bringing this \n                                feature to you in the future!\n                            </Tooltip>\n                        }\n                    >\n                        <h5 className=\"payment-label\">Split Bill Calculator</h5>\n                    </OverlayTrigger>\n\n                    <h4 align=\"center\">${((total + tip) / splitCounter).toFixed(2)} <span style={{fontSize: '20px'}}>per person</span></h4>\n                    \n                    <div style={{display: 'flex', justifyContent: 'space-evenly', alignItems: 'center'}}>\n                        <Button variant='primary' onClick={this.handleMinusSplit}>-</Button>\n                        <h5>{splitCounter}</h5>\n                        <Button variant='primary' onClick={this.handlePlusSplit}>+</Button>\n                    </div>\n                </div>\n                <Button className=\"payment-complete-btn\" onClick={this.completePayment}>Complete Payment</Button>\n            </Container>) :\n            user && (<Container>\n                <h1>Thank you for your payment, <strong>{user.name}</strong>!</h1>\n                <h5>\n                    An email with your receipt has been sent to <strong>{user.email}</strong>. \n                    We hope to see you again soon!\n                </h5>\n            </Container>);\n    }\n}"]},"metadata":{},"sourceType":"module"}